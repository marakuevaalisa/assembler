%include "io.inc"

section .text
global CMAIN
CMAIN:
LEA ESI, [a]
MOV AL, [ESI]
AND AL, 0xFC
SHR AL, 2

PRINT_DEC 1, AL
NEWLINE

MOV BL, [ESI]
MOV DL, 0x03
AND BL, DL
SHL BL, 6
INC ESI
MOV AL, [ESI]
AND AL, 0xF0
SHR AL, 4
OR AL, BL

PRINT_DEC 1, AL
NEWLINE

MOV BL, [ESI]
AND BL, 0x0F
SHL BL, 2
INC ESI
MOV AL, [ESI]
AND AL, 0xC0
SHR AL, 6
OR AL, BL

PRINT_DEC 1, AL
NEWLINE

MOV AL, [ESI]
AND AL, 0x3F

PRINT_DEC 1, AL
NEWLINE

INC ESI
MOV AL, [ESI]
AND AL, 0xFC
SHR AL, 2

PRINT_DEC 1, AL
NEWLINE

MOV BL, [ESI]
MOV DL, 0x03
AND BL, DL
SHL BL, 6
INC ESI
MOV AL, [ESI]
AND AL, 0xF0
SHR AL, 4
OR AL, BL

PRINT_DEC 1, AL
NEWLINE

MOV BL, [ESI]
AND BL, 0x0F
SHL BL, 2
INC ESI
MOV AL, [ESI]
AND AL, 0xC0
SHR AL, 6
OR AL, BL

PRINT_DEC 1, AL
NEWLINE

MOV AL, [ESI]
AND AL, 0x3F

PRINT_DEC 1, AL
NEWLINE
RET
section .data
a: db 0x08, 0xE5, 0x11, 0x3C, 0x97, 0xC0

;”паковка массива из 8 эл-тов по 6 бит:
;2 14 20 17 15 9 31 0
;000010 001110 010100 010001 001111 001001 011111 000000
;00001000 11100101 00010001 00111100 10010111 11000000
;0x08 0xE5 0x11 0x3C 0x97 0xC0